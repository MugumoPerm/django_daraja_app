{% extends 'layout.html' %}
{% load widget_tweaks %}
{% load static %}
{% block title %}Register{% endblock %}
{% block links %}
	<link rel='stylesheet' href="{% static 'styles/register.css '%}">
	 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
      
{% endblock %}
{% block body %}
<div class="container">
    <div class="row d-flex justify-content-center align-items-center style="min-height: 100vh;">
      <div class="col-md-6">
        <h2 class="mt-4 mb-4 text-center">Register</h2>
	{% if errors %}
      <div class="alert alert-danger" role="alert">
        <strong>Error(s):</strong>
        <ul>
          {% for field, error_list in errors.items %}
            {% for error in error_list %}
              <li>{{ field }}: {{ error }}</li>
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
    {% endif %}

        <form method="post" action="{% url 'register' %}">
          {% csrf_token %}
          
          <div class="form-group">
            {% render_field form.username placeholder="Username" hx-post="/check_username/"  hx-trigger="keyup changed delay:1s" hx-target="#check_username"   %}
          </div>

	  <div id="check_username"></div>
	  <br>

	  <div class="form-group">
            {% render_field form.admission_number placeholder="admission number" %}
          </div>
	  <br>

          <div class="form-group">
            {% render_field form.email placeholder="Email" %}
          </div>
          <br>
	  <div class="form-group">
            {% render_field form.phone_number placeholder="phone-254-XXX-XXX" %}
          </div>
          <br>


          <div class="form-group">
            {% render_field form.password1 placeholder="Password" %}
          </div>
          <br>

          <div class="form-group">
            {% render_field form.password2 placeholder="Confirm Password" %}
          </div>
          <br>

          <button type="submit" class="btn btn-primary btn-block">Register</button>
        </form>
      </div>
    </div>
  </div>   
{% endblock %}

